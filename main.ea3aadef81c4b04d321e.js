!function(e){function t(t){for(var o,r,n=t[0],s=t[1],a=t[2],c=0,d=[];c<n.length;c++)r=n[c],Object.prototype.hasOwnProperty.call(l,r)&&l[r]&&d.push(l[r][0]),l[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);for(p&&p(t);d.length;)d.shift()();return h.push.apply(h,a||[]),i()}function i(){for(var e,t=0;t<h.length;t++){for(var i=h[t],o=!0,n=1;n<i.length;n++){var s=i[n];0!==l[s]&&(o=!1)}o&&(h.splice(t--,1),e=r(r.s=i[0]))}return e}var o={},l={0:0},h=[];function r(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=o,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var n=window.webpackJsonp=window.webpackJsonp||[],s=n.push.bind(n);n.push=t,n=n.slice();for(var a=0;a<n.length;a++)t(n[a]);var p=s;h.push([121,1]),i()}({121:function(e,t,i){i(122),e.exports=i(310)},308:function(e,t,i){},309:function(e,t){},310:function(e,t,i){"use strict";i.r(t);i(308),i.p,i(309);var o=i.p+"685bf969e835cba4bd6868130a8eb70e.jpg",l=i.p+"06e71e492328fd9500dc00a65192f59d.png",h=i.p+"42b978f0853845741c95e60549813674.png",r=i.p+"55cf32378c5c2e3710818c71506a0672.png",n=i.p+"b4fefe03b879c19679319db327785b94.png",s=i.p+"bfd69bd2643d70a243cd75da3a3f25ff.png";window.onload=function(){var e,t=document.getElementById("canvas"),i=t.getContext("2d"),a=document.getElementById("backgroundCanvas"),p=a.getContext("2d"),c=0,d=new Image;d.src=o,d.style.backgroundPosition="center",d.style.backgroundSize="cover",d.style.objectFit="cover";var w,f=0,u=0,g=[];function m(){this.gameOver=!1,this.score=0,this.pillowCollected=0,this.pillowMissed=0,this.playerWidth=150,this.playerHeight=90,this.playerSpeed=10,this.x=t.width/2,this.y=t.height-this.playerHeight,this.playerImage=new Image,this.playerImage.src=l,this.render=function(){i.drawImage(this.playerImage,this.x,this.y)},this.moveLeft=function(){this.x>0&&(this.x-=this.playerSpeed)},this.moveRight=function(){this.x<t.width-this.playerWidth&&(this.x+=this.playerSpeed)}}function y(){this.pillowNumber=Math.floor(5*Math.random()),this.pillowType="",this.pillowScore=0,this.pillowWidth=50,this.pillowHeight=50,this.pillowImage=new Image,this.pillowSpeed=Math.floor(3*Math.random()+1),this.x=Math.random()*(t.width-this.pillowWidth),this.y=Math.random()*-t.height-this.pillowHeight,this.choosePillow=function(){0==this.pillowNumber?(this.pillowType="gabe",this.pillowScore=5*this.pillowSpeed,this.pillowImage.src=h):1==this.pillowNumber?(this.pillowType="emoji",this.pillowScore=10*this.pillowSpeed,this.pillowImage.src=r):2==this.pillowNumber?(this.pillowType="hz",this.pillowScore=15*this.pillowSpeed,this.pillowImage.src=n):3==this.pillowNumber&&(this.pillowType="tiler",this.pillowScore=20*this.pillowSpeed,this.pillowImage.src=s)},this.fall=function(){this.y<t.height-this.pillowHeight?this.y+=this.pillowSpeed:(4==u?u=0:u++,w.pillowMissed+=1,this.changeState(),this.choosePillow()),this.checkIfCaught()},this.checkIfCaught=function(){this.y>=w.y&&(this.x>w.x&&this.x<w.x+w.playerWidth||this.x+this.pillowWidth>w.x&&this.x+this.pillowWidth<w.x+w.playerWidth)&&(4==f?f=0:f++,w.score+=this.pillowScore,w.pillowCollected+=1,this.changeState(),this.choosePillow())},this.changeState=function(){this.pillowNumber=Math.floor(5*Math.random()),this.pillowSpeed=Math.floor(3*Math.random()+1),this.x=Math.random()*(t.width-this.pillowWidth),this.y=Math.random()*-t.height-this.pillowHeight},this.render=function(){i.drawImage(this.pillowImage,this.x,this.y)}}function b(){p.font="bold 23px Roboto",p.fillStyle="WHITE",w=new m,g=[];for(var e=0;e<15;e++){var t=new y;t.choosePillow(),g.push(t)}v(),window.requestAnimationFrame(x)}function v(){w.pillowMissed>=10&&(w.gameOver=!0);for(var t=0;t<g.length;t++)g[t].fall();e=window.setTimeout(v,30)}function x(){if(0==w.gameOver){i.clearRect(0,0,t.width,t.height),p.clearRect(0,0,a.width,a.height),p.drawImage(d,0,0),w.render();for(var e=0;e<g.length;e++)g[e].render();p.fillText("Счёт: "+w.score,50,50),p.fillText("Лучший счёт: "+c,250,50),p.fillText("Подушек поймано: "+w.pillowCollected,500,50),p.fillText("Пропущено: "+w.pillowMissed,780,50)}else{for(var o=0;o<15;o++)console.log("скорость"+g[g.length-1].pillowSpeed),g.pop();c<w.score&&(c=w.score,p.fillText("Новый лучший счёт: "+c,t.width/2-100,t.height/2)),p.fillText("PRESS F(enter)",t.width/2-360,t.height/2+50),i.clearRect(0,0,t.width,t.height)}window.requestAnimationFrame(x)}window.addEventListener("keydown",(function(t){t.preventDefault(),37==t.keyCode?w.moveLeft():39==t.keyCode?w.moveRight():13==t.keyCode&&1==w.gameOver&&(b(),window.clearTimeout(e))})),b()}}});